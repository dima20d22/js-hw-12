{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/js/tryAndCatch.js","../src/main.js"],"sourcesContent":["const APIKey = \"47994824-0d51099febe4e8602bb4fd3aa\";\nimport axios from \"axios\";\n\nexport let page = 1;\n\nexport default async function searchApi(input) {\n  return await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      key: APIKey,\n      q: input,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n}\n\nexport function nextPage() {\n  page++;\n}\n\nexport function pageCount() {\n  page = 1;\n}\n","import simpleLightbox from \"simplelightbox\";\n\nexport const box = document.querySelector(\".box\");\n\nexport default function renderCards(data) {\n  data.hits.forEach((hit) => {\n    box.innerHTML += `\n        <li class='li'>\n          <a href=\"${hit.largeImageURL}\" class=\"img\">\n            <img class = \"img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n          </a>\n          <div class = \"div\">\n            <p  class=\"p\"><span class=\"p__span\">Likes </span> ${hit.likes}</p>\n            <p  class=\"p\"><span class=\"p__span\">Views </span> ${hit.views}</p>\n            <p  class=\"p\"><span class=\"p__span\">Comments </span> ${hit.comments}</p>\n            <p  class=\"p\"><span class=\"p__span\">Downloads </span> ${hit.downloads}</p>\n          </div>\n        </li>\n      `;\n  });\n\n  const lightBox = new simpleLightbox(\".box a\", {\n    captionsData: \"alt\",\n    captionDelay: 100,\n    captionPosition: \"bottom\",\n  });\n\n  lightBox.refresh();\n}\n","import \"izitoast/dist/css/iziToast.min.css\";\nimport searchApi from \"./pixabay-api\";\nimport renderCards from \"./render-function\";\n\nlet totalHits = 0;\n\nexport default async function tryAndCatch(\n  inputValue,\n  btnLoadMore,\n  errrorMessage,\n  loader\n) {\n  try {\n    const response = await searchApi(inputValue);\n    console.log(response);\n\n    if (response.status !== 200) throw new Error(\"Failed to fetch data.\");\n\n    const data = response.data;\n\n    if (data.total === 0) {\n      iziToast.show({\n        message:\n          \"Sorry, there are no images matching your search query. Please try again!\",\n        color: \"red\",\n        position: \"topRight\",\n      });\n      errrorMessage.classList.remove(\"is-hidden\");\n      btnLoadMore.classList.add(\"is-hidden\");\n      return;\n    }\n\n    renderCards(data);\n    totalHits = data.hits.length;\n    if (totalHits < 15 && totalHits === data.total) {\n      btnLoadMore.classList.add(\"is-hidden\");\n    } else if (totalHits < 15 && totalHits < data.total) {\n      btnLoadMore.classList.add(\"is-hidden\");\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: \"red\",\n        position: \"topRight\",\n      });\n    } else {\n      btnLoadMore.classList.remove(\"is-hidden\");\n    }\n  } catch (error) {\n    iziToast.show({\n      message: \"An error occurred while fetching the data.\",\n      color: \"red\",\n      position: \"topRight\",\n    });\n  } finally {\n    loader.classList.add(\"is-hidden\");\n  }\n}\n","import \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport { nextPage, pageCount } from \"./js/pixabay-api\";\nimport { page } from \"./js/pixabay-api\";\nimport { box } from \"./js/render-function\";\nimport tryAndCatch from \"./js/tryAndCatch\";\n\nconst btnLoadMore = document.querySelector(\".btn__load-more\");\nconst form = document.querySelector(\"form\");\nconst input = document.querySelector(\"input[type=text]\");\nconst loader = document.querySelector(\".loader\");\nconst errrorMessage = document.querySelector(\"p\");\nconsole.log(page);\n\nlet oldInputValue = \"\";\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  pageCount();\n  let inputValue = input.value.trim();\n  oldInputValue = inputValue;\n  pageCount();\n\n  if (inputValue === \"\") {\n    iziToast.show({\n      message: \"Please give a valid input.\",\n      color: \"red\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  box.innerHTML = \"\";\n  loader.classList.remove(\"is-hidden\");\n  errrorMessage.classList.add(\"is-hidden\");\n  btnLoadMore.classList.add(\"is-hidden\");\n  await tryAndCatch(inputValue, btnLoadMore, errrorMessage, loader);\n  input.value = \"\";\n});\n\nbtnLoadMore.addEventListener(\"click\", async () => {\n  await tryAndCatch(oldInputValue, btnLoadMore, errrorMessage, loader);\n  nextPage();\n  const rect = box.getBoundingClientRect();\n\n  window.scrollBy({\n    top: rect.bottom - window.innerHeight,\n    behavior: \"smooth\",\n  });\n\n  console.log(\"Current page:\", page);\n});\n\nconsole.log(window);\n"],"names":["APIKey","page","searchApi","input","axios","nextPage","pageCount","box","renderCards","data","hit","simpleLightbox","totalHits","tryAndCatch","inputValue","btnLoadMore","errrorMessage","loader","response","form","oldInputValue","e","iziToast","rect"],"mappings":"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"}